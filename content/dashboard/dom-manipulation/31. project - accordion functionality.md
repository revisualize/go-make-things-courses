---
title: "Add accordion functionality"
date: 2018-01-14T21:38:44-05:00
draft: false
section: "Project"
video: "123"
noTitle: false
---

At the moment, we have a collection of show-and-hide links.

To really make this an accordion, we only want one content are to be open at a time. We need to find any open accordion content areas and close them.

We'll use `querySelectorAll()` to get any elements with both the `.accordion-content` and `.active` classes. Then, we'll loop through them and remove the `.active` class with `classList.remove()`.

```javascript
// Listen for clicks on the document
document.addEventListener('click', function (event) {

	// Bail if our clicked element doesn't have the .accordion-toggle class
	if (!event.target.classList.contains('accordion-toggle')) return;

	// Get the target content
	var content = document.querySelector(event.target.hash);
	if (!content) return;

	// Prevent default link behavior
	event.preventDefault();

	// Get all open accordion content, loop through it, and close it
	var accordions = document.querySelectorAll('.accordion-content.active');
	accordions.forEach(function (accordion) {
		accordion.classList.remove('active');
	});

	// Toggle our content
	content.classList.toggle('active');

});
```

*__Note:__ Don't forget to add a polyfill for `NodeList.forEach()`.*

Now, only one content area can be open a time.

There's a small problem with our code, though. If you click a toggle for an open content area, you might want to close that content area. With our current code, that area remains open.

In our `for` loop, we're removing the existing active class on that content, and just adding it back again with `classList.toggle()`.

Instead, let's first check to see if our content is open using the `classList.contains()` method. If it's open, we'll close it by removing the `.active` class and end our function. Otherwise, we'll close all currently open content and open it by using `classList.add()` instead of `classList.toggle()`.

```javascript
// Listen for clicks on the document
document.addEventListener('click', function (event) {

	// Bail if our clicked element doesn't have the .accordion-toggle class
	if (!event.target.classList.contains('accordion-toggle')) return;

	// Get the target content
	var content = document.querySelector(event.target.hash);
	if (!content) return;

	// Prevent default link behavior
	event.preventDefault();

	// If the content is already expanded, collapse it and quit
	if (content.classList.contains('active')) {
		content.classList.remove('active');
		return;
	}

	// Get all open accordion content, loop through it, and close it
	var accordions = document.querySelectorAll('.accordion-content.active');
	accordions.forEach(function (accordion) {
		accordion.classList.remove('active');
	});

	// Open our content
	content.classList.add('active');

});
```

Congratulations! You just created a hide-and-show/accordion script using a variety of DOM manipulation techniques.